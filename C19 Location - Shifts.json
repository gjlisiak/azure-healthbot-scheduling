{
 "name": "C19 Location - Shifts",
 "id": "3e5e8395-309f-442a-8a17-84b0ad8622bd",
 "scenario_trigger": "location_shifts",
 "description": "",
 "active": true,
 "updated": "2021-02-10T13:58:37.3810000Z",
 "userDisplayName": "Gregory Lisiak",
 "code": "{\"version\":3,\"steps\":[{\"id\":\"dc986aa9a0c1-3c27a5e434f30432-1d8d\",\"type\":\"action\",\"label\":\"Action\",\"designer\":{\"xLocation\":340,\"yLocation\":60,\"next\":\"0f41e4219830-f81e532a8e8881c4-49c9\"},\"onInit\":\"scenario.manualExec = scenario.scenarioArgs.manualExec;\\nscenario.lat        = scenario.scenarioArgs.lat;\\nscenario.long        = scenario.scenarioArgs.long;\\nscenario.phase      = scenario.scenarioArgs.phase;\\nscenario.usePostal  = scenario.scenarioArgs.usePostal;\\nscenario.postalCode = scenario.scenarioArgs.postalCode;\\nscenario.FirstName  = scenario.scenarioArgs.FirstName;\\nscenario.LastName   = scenario.scenarioArgs.LastName;\\nscenario.DOB        = scenario.scenarioArgs.DOB;\\nscenario.Email      = scenario.scenarioArgs.Email;\\nscenario.Phone      = scenario.scenarioArgs.Phone;\\nscenario.Street1    = scenario.scenarioArgs.Street1;\\nscenario.Street2    = scenario.scenarioArgs.Street2;\\nscenario.City       = scenario.scenarioArgs.City;\\nscenario.State      = scenario.scenarioArgs.State;\\n\\nscenario.walgreensAPIKey = getEnv(\\\"walgreensAPIKey\\\");\"},{\"id\":\"0f41e4219830-f81e532a8e8881c4-49c9\",\"type\":\"branch\",\"condition\":\"scenario.usePostal === 'Y'\",\"designer\":{\"xLocation\":340,\"yLocation\":169,\"next\":\"0c23d61e640f-935a4ccf709eec9f-a6f0\"},\"label\":\"Postal\",\"targetStepId\":\"784e5feef736-62475340ce0876d7-8664\"},{\"id\":\"0c23d61e640f-935a4ccf709eec9f-a6f0\",\"type\":\"datasource\",\"designer\":{\"xLocation\":220,\"yLocation\":260,\"next\":\"0c725e7f47d4-6fc7fb6e3abd4607-7ff1\"},\"dataConnection\":\"\",\"urlBase\":\"https://services.walgreens.com/api/stores/search/v2\",\"urlPath\":\"\",\"urlParams\":\"\",\"contentType\":\"raw\",\"method\":\"post\",\"headers\":\"\",\"payload\":\"{\\r\\n    \\\"apiKey\\\": scenario.walgreensAPIKey,\\r\\n    \\\"affID\\\": \\\"storesapi\\\",\\r\\n    \\\"lat\\\": scenario.lat,\\r\\n    \\\"lng\\\": scenario.long,\\r\\n    \\\"r\\\": 25,\\r\\n    \\\"s\\\": 3,\\r\\n    \\\"requestType\\\": \\\"locator\\\"\\r\\n}\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"locationList\",\"error\":\"locationError\"},{\"id\":\"784e5feef736-62475340ce0876d7-8664\",\"type\":\"datasource\",\"designer\":{\"xLocation\":420,\"yLocation\":269,\"next\":\"0c725e7f47d4-6fc7fb6e3abd4607-7ff1\"},\"dataConnection\":\"\",\"urlBase\":\"https://services.walgreens.com/api/stores/search/v2\",\"urlPath\":\"\",\"urlParams\":\"\",\"contentType\":\"raw\",\"method\":\"post\",\"headers\":\"\",\"payload\":\"{\\r\\n    \\\"apiKey\\\": scenario.walgreensAPIKey,\\r\\n    \\\"affID\\\": \\\"storesapi\\\",\\r\\n    \\\"zip\\\" : scenario.postalCode,\\r\\n    \\\"r\\\": 25,\\r\\n    \\\"s\\\": 3,\\r\\n    \\\"requestType\\\": \\\"locator\\\"\\r\\n}\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"locationList\",\"error\":\"locationError\"},{\"id\":\"0c725e7f47d4-6fc7fb6e3abd4607-7ff1\",\"type\":\"action\",\"label\":\"Action\",\"designer\":{\"xLocation\":320,\"yLocation\":360,\"next\":\"0d192fadb0aa-6b75277d6d6fa6d2-fba2\"},\"onInit\":\"scenario.store1 = scenario.locationList.results[0].storeNumber;\\nscenario.store2 = scenario.locationList.results[1].storeNumber;\\nscenario.store3 = scenario.locationList.results[2].storeNumber;\\nscenario.store1brand = scenario.locationList.results[0].store.storeBrand;\\nscenario.store2brand = scenario.locationList.results[1].store.storeBrand;\\nscenario.store3brand = scenario.locationList.results[2].store.storeBrand;\\nscenario.store1addr = scenario.locationList.results[0].store.address.street;\\nscenario.store2addr = scenario.locationList.results[1].store.address.street;\\nscenario.store3addr = scenario.locationList.results[2].store.address.street;\\nscenario.store1city = scenario.locationList.results[0].store.address.city;\\nscenario.store2city = scenario.locationList.results[1].store.address.city;\\nscenario.store3city = scenario.locationList.results[2].store.address.city;\\nscenario.store1state = scenario.locationList.results[0].store.address.state;\\nscenario.store2state = scenario.locationList.results[1].store.address.state;\\nscenario.store3state = scenario.locationList.results[2].store.address.state;\\nscenario.store1postal = scenario.locationList.results[0].store.address.postalCode;\\nscenario.store2postal = scenario.locationList.results[1].store.address.postalCode;\\nscenario.store3postal = scenario.locationList.results[2].store.address.postalCode;\\nscenario.store1intersect = scenario.locationList.results[0].store.address.intersection;\\nscenario.store2intersect = scenario.locationList.results[1].store.address.intersection;\\nscenario.store3intersect = scenario.locationList.results[2].store.address.intersection;\"},{\"id\":\"0d192fadb0aa-6b75277d6d6fa6d2-fba2\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":309,\"yLocation\":473,\"next\":\"ebfa5d5a07cc-dbc097e447656c9a-fdd1\"},\"variable\":\"storeSelect\",\"submitTitle\":\"Submit\",\"label\":\"StoreSelect\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.2\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"Container\\\",\\r\\n            \\\"items\\\": [\\r\\n                {\\r\\n                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                    \\\"text\\\": \\\"Here are the three closest locations within 25 miles.  \\\",\\r\\n                    \\\"wrap\\\": true,\\r\\n                    \\\"weight\\\": \\\"Bolder\\\"\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                    \\\"text\\\": \\\"Please select one to proceed to the appointment time selection.\\\",\\r\\n                    \\\"wrap\\\": true\\r\\n                }\\r\\n            ]\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"ColumnSet\\\",\\r\\n            \\\"columns\\\": [\\r\\n                {\\r\\n                    \\\"type\\\": \\\"Column\\\",\\r\\n                    \\\"width\\\": \\\"stretch\\\"\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"Column\\\",\\r\\n                    \\\"width\\\": \\\"stretch\\\"\\r\\n                }\\r\\n            ]\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"Container\\\",\\r\\n            \\\"items\\\": [\\r\\n                {\\r\\n                    \\\"type\\\": \\\"ColumnSet\\\",\\r\\n                    \\\"columns\\\": [\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Column\\\",\\r\\n                            \\\"width\\\": \\\"stretch\\\",\\r\\n                            \\\"items\\\": [\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store1brand + \\\" Store \\\" + scenario.store1,\\r\\n                                    \\\"wrap\\\": true,\\r\\n                                    \\\"weight\\\": \\\"Bolder\\\"\\r\\n                                }\\r\\n                            ]\\r\\n                        },\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Column\\\",\\r\\n                            \\\"width\\\": \\\"stretch\\\",\\r\\n                            \\\"items\\\": [\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store1addr,\\r\\n                                    \\\"wrap\\\": true\\r\\n                                },\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store1city + ', ' + scenario.store1state + ' ' + scenario.store1postal,\\r\\n                                    \\\"wrap\\\": true\\r\\n                                }\\r\\n                            ]\\r\\n                        }\\r\\n                    ]\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                    \\\"text\\\": \\\"Located at the Intersection of \\\" + scenario.store1intersect,\\r\\n                    \\\"wrap\\\": true\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"ActionSet\\\",\\r\\n                    \\\"actions\\\": [\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Action.Submit\\\",\\r\\n                            \\\"title\\\": \\\"Schedule at this Location\\\",\\r\\n                            \\\"id\\\": \\\"selectStore1\\\"\\r\\n                        }\\r\\n                    ]\\r\\n                }\\r\\n            ],\\r\\n            \\\"spacing\\\": \\\"Medium\\\",\\r\\n            \\\"style\\\": \\\"emphasis\\\"\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"Container\\\",\\r\\n            \\\"items\\\": [\\r\\n                {\\r\\n                    \\\"type\\\": \\\"ColumnSet\\\",\\r\\n                    \\\"columns\\\": [\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Column\\\",\\r\\n                            \\\"width\\\": \\\"stretch\\\",\\r\\n                            \\\"items\\\": [\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store2brand + \\\" Store \\\" + scenario.store2,\\r\\n                                    \\\"wrap\\\": true,\\r\\n                                    \\\"weight\\\": \\\"Bolder\\\"\\r\\n                                }\\r\\n                            ]\\r\\n                        },\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Column\\\",\\r\\n                            \\\"width\\\": \\\"stretch\\\",\\r\\n                            \\\"items\\\": [\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store2addr,\\r\\n                                    \\\"wrap\\\": true\\r\\n                                },\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store2city + ', ' + scenario.store2state + ' ' + scenario.store2postal,\\r\\n                                    \\\"wrap\\\": true\\r\\n                                }\\r\\n                            ]\\r\\n                        }\\r\\n                    ]\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                    \\\"text\\\": \\\"Located at the Intersection of \\\" + scenario.store2intersect,\\r\\n                    \\\"wrap\\\": true\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"ActionSet\\\",\\r\\n                    \\\"actions\\\": [\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Action.Submit\\\",\\r\\n                            \\\"title\\\": \\\"Schedule at this Location\\\",\\r\\n                            \\\"id\\\": \\\"selectStore2\\\"\\r\\n                        }\\r\\n                    ]\\r\\n                }\\r\\n            ]\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"Container\\\",\\r\\n            \\\"items\\\": [\\r\\n                {\\r\\n                    \\\"type\\\": \\\"ColumnSet\\\",\\r\\n                    \\\"columns\\\": [\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Column\\\",\\r\\n                            \\\"width\\\": \\\"stretch\\\",\\r\\n                            \\\"items\\\": [\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store3brand + \\\" Store \\\" + scenario.store3,\\r\\n                                    \\\"wrap\\\": true,\\r\\n                                    \\\"weight\\\": \\\"Bolder\\\"\\r\\n                                }\\r\\n                            ]\\r\\n                        },\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Column\\\",\\r\\n                            \\\"width\\\": \\\"stretch\\\",\\r\\n                            \\\"items\\\": [\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store3addr,\\r\\n                                    \\\"wrap\\\": true\\r\\n                                },\\r\\n                                {\\r\\n                                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                                    \\\"text\\\": scenario.store3city + ', ' + scenario.store3state + ' ' + scenario.store3postal,\\r\\n                                    \\\"wrap\\\": true\\r\\n                                }\\r\\n                            ]\\r\\n                        }\\r\\n                    ]\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"TextBlock\\\",\\r\\n                    \\\"text\\\": \\\"Located at the Intersection of \\\" + scenario.store3intersect,\\r\\n                    \\\"wrap\\\": true\\r\\n                },\\r\\n                {\\r\\n                    \\\"type\\\": \\\"ActionSet\\\",\\r\\n                    \\\"actions\\\": [\\r\\n                        {\\r\\n                            \\\"type\\\": \\\"Action.Submit\\\",\\r\\n                            \\\"title\\\": \\\"Schedule at this Location\\\",\\r\\n                            \\\"id\\\": \\\"selectStore3\\\"\\r\\n                        }\\r\\n                    ]\\r\\n                }\\r\\n            ],\\r\\n            \\\"spacing\\\": \\\"Medium\\\",\\r\\n            \\\"style\\\": \\\"emphasis\\\"\\r\\n        }\\r\\n    ]\\r\\n}\"}]},{\"id\":\"ebfa5d5a07cc-dbc097e447656c9a-fdd1\",\"type\":\"beginScenario\",\"designer\":{\"xLocation\":320,\"yLocation\":569},\"scenario\":\"sched_shifts\",\"args\":\"{\\r\\n    \\\"manualExec\\\" : scenario.manualExec,\\r\\n    \\\"lat\\\"        : scenario.lat,\\r\\n    \\\"long\\\"        : scenario.long,\\r\\n    \\\"phase\\\"      : scenario.phase,\\r\\n    \\\"usePostal\\\"  : scenario.usePostal,\\r\\n    \\\"postalCode\\\" : scenario.postalCode,\\r\\n    \\\"FirstName\\\"  : scenario.FirstName,\\r\\n    \\\"LastName\\\"   : scenario.LastName,\\r\\n    \\\"DOB\\\"        : scenario.DOB,\\r\\n\\t\\\"Email\\\"      : scenario.Email,\\r\\n\\t\\\"Phone\\\"      : scenario.Phone,\\r\\n    \\\"Street1\\\"    : scenario.Street1,\\r\\n    \\\"Street2\\\"    : scenario.Street2,\\r\\n    \\\"City\\\"       : scenario.City,\\r\\n    \\\"State\\\"      : scenario.State\\r\\n}\"}],\"interrupting\":false,\"breaking\":false,\"returningMessage\":\"\"}"
}